function creationNotification(e){if("Notification"in window)if("granted"===Notification.permission){new Notification(e)}else"denied"!==Notification.permission&&Notification.requestPermission(function(t){if("granted"===t){new Notification(e)}});else alert("This browser does not support desktop notification")}"denied"!==Notification.permission&&Notification.requestPermission(function(e){}),angular.module("seating",["ngRoute","seating.service","seating.dashboard.controller","ui.bootstrap"]).config(["$locationProvider","$routeProvider",function(e,t){t.otherwise({redirectTo:"/table/dashboard"})}]),angular.module("seating.service",[]).factory("employee",function(){var e=function(e,t,n,i,a){this.id=e,this.name=t,this.team=n,this.designation=i,this.table=a},t=[],n=function(){t.push(new e(100,"John Nash","A","Software Engineer",{id:1,seat:1})),t.push(new e(200,"Bob Builder","A","Sr. Software Engineer",{id:1,seat:2})),t.push(new e(300,"Ram Kumar Singhania","B","Test Engineer",{id:2,seat:3})),t.push(new e(400,"Mohan Singh","B","Sr. Test Engineer",{id:2,seat:4})),t.push(new e(500,"Rock Johnson","C","Product Manager",{id:4,seat:3})),t.push(new e(600,"Eric Smith","C","Chief Technical Officer",{id:5,seat:2})),t.push(new e(700,"Joern Kevin","C","Junior Engineer",{id:6,seat:3}))},i=function(e){var n=t.filter(function(t){return t.id==e});return n.length>0?n[0]:{}},a=function(e){var n=t.filter(function(t){return t.table.id==e.id&&t.table.seat==e.seat});return n.length>0?n[0]:{}},o=function(e,t){var n=i(e);return n&&(n.name=t.name,n.team=t.team,n.designation=t.designation,n.table=t.table),n},r=function(){return t};return n(),{list:r,findEmployeeByTable:a,editEmployee:o}}).directive("setEmployee",["employee",function(e){return{restrict:"A",scope:!0,link:function(t,n,i){t.employee=e.findEmployeeByTable({id:t.table.id,seat:t.seat}),t.$watch("employee",function(e,i){if(e&&e.id){var a='<div style="min-width: 200px;"><div>Name: '+t.employee.name+"</div><div>"+t.employee.designation+"</div><div>Team: "+t.employee.team+"</div><div>Employee Id: "+t.employee.id+"</div><div>";$(n).popover({trigger:"hover",html:!0,content:a,placement:t.employee.table.id%3==0?"left":"right"}),n.bind("mousedown",function(){$(n).popover("hide")}),n[0].addEventListener("dragstart",t.handleDragStart,!1),n[0].addEventListener("dragend",t.handleDragEnd,!1),n[0].removeEventListener("drop",t.handleDrop,!1),n[0].removeEventListener("dragover",t.handleDragOver,!1)}else $(n).popover("destroy"),n[0].removeEventListener("dragstart",t.handleDragStart,!1),n[0].removeEventListener("dragend",t.handleDragEnd,!1),n[0].addEventListener("drop",t.handleDrop,!1),n[0].addEventListener("dragover",t.handleDragOver,!1)})},controller:["$scope","$rootScope",function(t,n){t.handleDragStart=function(e){t.employee&&t.employee.id?(this.style.opacity="0.4",n.currentEmployee=t.employee,e.dataTransfer.setData("json",JSON.stringify(t.employee))):(e.preventDefault(),e.stopPropagation())},t.handleDragEnd=function(e){var i=n.currentEmployee;("none"!=e.dataTransfer.dropEffect||i.table.id!=t.table.id&&i.table.seat!=t.table.seat)&&(t.employee=null,t.$apply()),this.style.opacity="1.0"},t.handleDrop=function(i){i.preventDefault(),i.stopPropagation();var a=JSON.parse(i.dataTransfer.getData("json"));a.table.id=t.table.id,a.table.seat=t.seat,n.currentEmployee=null,t.employee=e.editEmployee(a.id,a),t.$apply(),creationNotification(a.name+" has been moved to Table "+a.table.id+" and Seat "+a.table.seat)},t.handleDragOver=function(e){return e.preventDefault(),e.dataTransfer.dropEffect="move",!1}}]}}]),angular.module("seating.dashboard.controller",["ngRoute","seating.service"]).config(["$routeProvider",function(e){e.when("/table/dashboard",{templateUrl:"table/dashboard.html",controller:"TableDashboardCtrl"})}]).controller("TableDashboardCtrl",["$scope","employee",function(e,t){e.employees={},e.employees.list=t.list(),e.tables=[{id:1,seats:[1,2,3,4]},{id:2,seats:[1,2,3,4]},{id:3,seats:[1,2,3,4]},{id:4,seats:[1,2,3,4]},{id:5,seats:[1,2,3,4]},{id:6,seats:[1,2,3,4]}]}]);